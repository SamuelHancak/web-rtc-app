{"map":{"version":3,"sources":["static/js/main.4a3accd2.chunk.js"],"names":["this","push","39","module","exports","__webpack_require__","44","73","76","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","toConsumableArray","defineProperty","objectSpread2","classCallCheck","createClass","inherits","createSuper","lib","lib_default","video","_Component","Object","Video","_super","props","_this","call","state","key","value","videoStream","srcObject","nextProps","_this2","a","createElement","style","frameStyle","id","muted","autoPlay","videoStyles","ref","_ref","components_Video","videos","Videos","rVideos","remoteStreams","_rVideos","map","rVideo","index","name","display","stream","width","float","padding","cursor","objectFit","borderRadius","setState","zIndex","position","backgroundColor","maxHeight","top","whiteSpace","RTCPeerConnectionConfig","iceServers","urls","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","peerConnections","src_App","App","getLocalStream","isAdmin","constraints","audio","max","height","min","frameRate","options","mirror","navigator","mediaDevices","getUserMedia","then","localStream","audioTracks","getAudioTracks","i","length","enabled","mute","catch","e","console","log","componentDidMount","socket","connect","query","admin","sendToPeer","messageType","payload","arguments","undefined","emit","socketId","createPeerConnection","remoteSocketId","callback","pc","RTCPeerConnection","onicecandidate","candidate","onnegotiationneeded","oniceconnectionstatechange","event","ontrack","track","_ref2","selectedVideo","remoteStreamsCopy","streamObjIndex","findIndex","MediaStream","addTrack","close","on","_ref3","addIceCandidate","RTCIceCandidate","_ref4","peerCount","status","concat","_ref5","getTracks","forEach","createOffer","offer","setLocalDescription","desc","localDescription","_ref6","setRemoteDescription","RTCSessionDescription","_ref7","_ref8","filter","_ref9","createAnswer","answer","switchVideo","_video","window","location","pathname","statusText","color","minHeight","Fragment","right","margin","bottom","minWidth","onMouseDown","onMouseUp","Boolean","hostname","match","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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"},"code":"(this[\"webpackJsonpweb-rtc-audio\"]=this[\"webpackJsonpweb-rtc-audio\"]||[]).push([[0],{39:function(e,t,o){e.exports=o(76)},44:function(e,t,o){},73:function(e,t){},76:function(e,t,o){\"use strict\";o.r(t);var n=o(0),a=o.n(n),i=o(36),r=o.n(i),c=(o(44),o(38)),s=o(11),d=o(1),l=o(2),u=o(3),m=o(5),f=o(4),v=o(37),h=o.n(v),p=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={},n}return Object(u.a)(o,[{key:\"componentDidMount\",value:function(){this.props.videoStream&&(this.video.srcObject=this.props.videoStream)}},{key:\"componentWillReceiveProps\",value:function(e){e.videoStream&&e.videoStream!==this.props.videoStream&&(this.video.srcObject=e.videoStream)}},{key:\"render\",value:function(){var e=this;return a.a.createElement(\"div\",{style:Object(d.a)({},this.props.frameStyle)},a.a.createElement(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:!0,style:Object(d.a)({},this.props.videoStyles),ref:function(t){e.video=t}}))}}]),o}(n.Component),g=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={},n}return Object(u.a)(o,[{key:\"componentDidMount\",value:function(){this.props.videoStream&&(this.video.srcObject=this.props.videoStream)}},{key:\"componentWillReceiveProps\",value:function(e){e.videoStream&&e.videoStream!==this.props.videoStream&&(this.video.srcObject=e.videoStream)}},{key:\"render\",value:function(){var e=this;return a.a.createElement(\"div\",{style:Object(d.a)({},this.props.frameStyle)},a.a.createElement(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:!0,style:Object(d.a)({},this.props.videoStyles),ref:function(t){e.video=t}}))}}]),o}(n.Component),S=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={rVideos:[],remoteStreams:[]},n}return Object(u.a)(o,[{key:\"componentWillReceiveProps\",value:function(e){if(this.props.remoteStreams!==e.remoteStreams){var t=e.remoteStreams.map((function(e,t){return a.a.createElement(\"div\",{id:e.name,style:{display:\"inline\"},key:t},a.a.createElement(g,{videoStream:e.stream,frameStyle:{width:120,float:\"left\",padding:\"0 3px\"},videoStyles:{cursor:\"disabled\",objectFit:\"cover\",borderRadius:3,width:\"100%\"}}))}));this.setState({remoteStreams:e.remoteStreams,rVideos:t})}}},{key:\"render\",value:function(){return a.a.createElement(\"div\",{style:{zIndex:3,position:\"fixed\",padding:\"6px 3px\",backgroundColor:\"rgba(0,0,0,0.3)\",maxHeight:120,top:\"auto\",whiteSpace:\"nowrap\"}},this.state.rVideos)}}]),o}(n.Component),b={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},k={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},y={},w=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).getLocalStream=function(){var e=n.state.isAdmin,t={audio:!0,video:!!e||{width:{max:120},height:{min:80},frameRate:{max:25}},options:{mirror:!0}};return navigator.mediaDevices.getUserMedia(t).then((function(t){n.setState({localStream:t});for(var o=t.getAudioTracks(),a=0;a<o.length;++a)o[a].enabled=n.state.mute;e&&(o[0].enabled=!0)})).catch((function(e){console.log(\"getUserMedia Error: \",e)}))},n.componentDidMount=function(){var e=n.state.isAdmin;n.getLocalStream().then((function(){var t=h.a.connect(\"https://20bb5aa6.ngrok.io\",{query:{admin:e}}),o=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.emit(e,{socketId:t.id,payload:o})},a=function(e,t){try{var a=new RTCPeerConnection(b);y=Object(d.a)(Object(d.a)({},y),{},Object(s.a)({},e,a)),a.onicecandidate=function(e){var t=e.candidate;console.log(\"onicecandidate\",{candidate:t}),t&&o(\"candidate\",{candidate:t})},a.onnegotiationneeded=function(){console.log(\"onnegotiationneeded\")},a.oniceconnectionstatechange=function(e){console.log(\"oniceconnectionstatechange\",{event:e}),console.log(a)},a.ontrack=function(t){console.log(\"ontrack\",{event:t});var o=t.track;o&&n.setState((function(t){var n=t.selectedVideo,a=t.remoteStreams,i=Object(c.a)(a),r=i.findIndex((function(t){return t.id===e}));return-1===r&&(r=i.push({id:e,name:e,stream:new MediaStream})-1),i[r].stream.addTrack(o),{selectedVideo:n||i[r],remoteStreams:i}}))},a.close=function(){},t(a)}catch(i){console.log(\"Something went wrong! pc not created!!\",i),t(null)}};t.on(\"candidate\",(function(e){var t=e.socketId,o=e.candidate,n=y[t];n&&n.addIceCandidate(new RTCIceCandidate(o))})),t.on(\"connectionSuccess\",(function(t){var o=t.peerCount,a=e?o>0?\"Total Connected Peers: \".concat(o):\"Waiting for other peers to connect\":\"Connected\";n.setState({status:a})})),e?(t.on(\"peerJoin\",(function(e){var t=e.socketId,i=e.peerCount;console.log(\"peerJoin\",{socketId:t,peerCount:i}),n.setState({status:i>0?\"Total Connected Peers: \".concat(i):\"Waiting for other peers to connect\"}),a(t,(function(e){n.state.localStream&&n.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),function(e){e.createOffer(k).then((function(t){return e.setLocalDescription(t)})).then((function(){o(\"offer\",{desc:e.localDescription})}))}(e)}))})),t.on(\"answer\",(function(e){var t=e.socketId,o=e.desc;console.log(\"answer\",{socketId:t,desc:o});var n=y[t];n&&n.setRemoteDescription(new RTCSessionDescription(o))})),t.on(\"peerDisconnect\",(function(e){var t=e.socketId;console.log(\"peerDisconnect\",{socketId:t}),n.setState((function(e){var o=e.remoteStreams,n=e.selectedVideo;return{remoteStreams:o.filter((function(e){return e.id!==t})),selectedVideo:n&&n.id===t?o[0]:n}}))}))):t.on(\"offer\",(function(e){var t=e.socketId,i=e.desc;console.log(\"offer\",{socketId:t,desc:i}),a(t,(function(e){n.state.localStream&&n.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),e.setRemoteDescription(new RTCSessionDescription(i)).then((function(){return e.createAnswer(k)})).then((function(t){return e.setLocalDescription(t)})).then((function(){o(\"answer\",{desc:e.localDescription})}))}))}))}))},n.switchVideo=function(e){n.setState({selectedVideo:e})},n.state={localStream:null,mute:!1,remoteStreams:[],selectedVideo:null,status:\"Please wait...\",isAdmin:\"/admin\"===window.location.pathname},n}return Object(u.a)(o,[{key:\"render\",value:function(){var e=this,t=a.a.createElement(\"div\",{style:{color:\"yellow\",padding:5}},this.state.status);return a.a.createElement(\"div\",{style:{backgroundColor:\"black\",minHeight:\"100%\"}},this.state.isAdmin?a.a.createElement(\"div\",null,a.a.createElement(S,{switchVideo:this.switchVideo,remoteStreams:this.state.remoteStreams})):a.a.createElement(a.a.Fragment,null,a.a.createElement(p,{videoStyles:{zIndex:2,position:\"absolute\",right:0,width:200,height:200,margin:5,backgroundColor:\"black\"},videoStream:this.state.localStream,autoPlay:!0,muted:!0}),this.state.selectedVideo?a.a.createElement(p,{videoStyles:{zIndex:1,position:\"fixed\",bottom:0,minWidth:\"100%\",minHeight:\"100%\",backgroundColor:\"black\"},videoStream:this.state.selectedVideo.stream,autoPlay:!0}):null,a.a.createElement(\"div\",{style:{zIndex:3,position:\"absolute\",margin:10,backgroundColor:\"#cdc4ff4f\",padding:10,borderRadius:5}},t),a.a.createElement(\"div\",{style:{zIndex:5,position:\"absolute\",margin:10,right:10,bottom:120}},a.a.createElement(\"button\",{onMouseDown:function(){for(var t=0;t<e.state.localStream.getAudioTracks().length;++t)e.state.localStream.getAudioTracks()[t].enabled=!0},onMouseUp:function(){for(var t=0;t<e.state.localStream.getAudioTracks().length;++t)e.state.localStream.getAudioTracks()[t].enabled=!1}},\"Push to talk\"))),a.a.createElement(\"br\",null))}}]),o}(n.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);","extractedComments":[]}