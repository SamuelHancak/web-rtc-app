{"map":{"version":3,"sources":["static/js/main.26224a4e.chunk.js"],"names":["this","push","39","module","exports","__webpack_require__","44","73","76","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","toConsumableArray","defineProperty","objectSpread2","classCallCheck","createClass","inherits","createSuper","lib","lib_default","video","_Component","Object","Video","_super","props","_this","call","state","key","value","videoStream","srcObject","nextProps","_this2","a","createElement","style","frameStyle","id","muted","autoPlay","videoStyles","ref","_ref","components_Video","videos","Videos","rVideos","remoteStreams","_rVideos","map","rVideo","index","name","display","stream","height","width","float","padding","cursor","objectFit","borderRadius","setState","zIndex","position","backgroundColor","top","whiteSpace","RTCPeerConnectionConfig","iceServers","urls","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","peerConnections","src_App","App","getLocalStream","isAdmin","constraints","audio","max","frameRate","navigator","mediaDevices","getUserMedia","then","localStream","audioTracks","getAudioTracks","i","length","enabled","mute","catch","e","console","log","componentDidMount","socket","connect","query","admin","sendToPeer","messageType","payload","arguments","undefined","emit","socketId","createPeerConnection","remoteSocketId","callback","pc","RTCPeerConnection","onicecandidate","candidate","onnegotiationneeded","oniceconnectionstatechange","event","ontrack","track","_ref2","selectedVideo","remoteStreamsCopy","streamObjIndex","findIndex","MediaStream","addTrack","close","on","_ref3","addIceCandidate","RTCIceCandidate","_ref4","peerCount","status","concat","_ref5","getTracks","forEach","createOffer","offer","setLocalDescription","desc","localDescription","_ref6","setRemoteDescription","RTCSessionDescription","_ref7","_ref8","filter","_ref9","createAnswer","answer","switchVideo","_video","window","location","pathname","statusText","color","minHeight","Fragment","margin","right","bottom","minWidth","onMouseDown","onMouseUp","Boolean","hostname","match","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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"},"code":"(this[\"webpackJsonpweb-rtc-audio\"]=this[\"webpackJsonpweb-rtc-audio\"]||[]).push([[0],{39:function(e,t,o){e.exports=o(76)},44:function(e,t,o){},73:function(e,t){},76:function(e,t,o){\"use strict\";o.r(t);var n=o(0),a=o.n(n),i=o(36),r=o.n(i),c=(o(44),o(38)),s=o(11),d=o(1),l=o(2),u=o(3),m=o(5),f=o(4),h=o(37),v=o.n(h),p=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={},n}return Object(u.a)(o,[{key:\"componentDidMount\",value:function(){this.props.videoStream&&(this.video.srcObject=this.props.videoStream)}},{key:\"componentWillReceiveProps\",value:function(e){e.videoStream&&e.videoStream!==this.props.videoStream&&(this.video.srcObject=e.videoStream)}},{key:\"render\",value:function(){var e=this;return a.a.createElement(\"div\",{style:Object(d.a)({},this.props.frameStyle)},a.a.createElement(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:!0,style:Object(d.a)({},this.props.videoStyles),ref:function(t){e.video=t}}))}}]),o}(n.Component),g=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={},n}return Object(u.a)(o,[{key:\"componentDidMount\",value:function(){this.props.videoStream&&(this.video.srcObject=this.props.videoStream)}},{key:\"componentWillReceiveProps\",value:function(e){e.videoStream&&e.videoStream!==this.props.videoStream&&(this.video.srcObject=e.videoStream)}},{key:\"render\",value:function(){var e=this;return a.a.createElement(\"div\",{style:Object(d.a)({},this.props.frameStyle)},a.a.createElement(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:!0,style:Object(d.a)({},this.props.videoStyles),ref:function(t){e.video=t}}))}}]),o}(n.Component),S=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={rVideos:[],remoteStreams:[]},n}return Object(u.a)(o,[{key:\"componentWillReceiveProps\",value:function(e){if(this.props.remoteStreams!==e.remoteStreams){var t=e.remoteStreams.map((function(e,t){return a.a.createElement(\"div\",{id:e.name,style:{display:\"inline\"},key:t},a.a.createElement(g,{videoStream:e.stream,frameStyle:{height:120,width:213,float:\"left\",padding:\"0 3px\"},videoStyles:{cursor:\"disabled\",objectFit:\"cover\",borderRadius:3,width:\"100%\"}}))}));this.setState({remoteStreams:e.remoteStreams,rVideos:t})}}},{key:\"render\",value:function(){return a.a.createElement(\"div\",{style:{zIndex:3,position:\"fixed\",padding:\"6px 3px\",backgroundColor:\"rgba(0,0,0,0.3)\",height:120,top:\"auto\",whiteSpace:\"nowrap\"}},this.state.rVideos)}}]),o}(n.Component),b={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},k={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},y={},w=function(e){Object(m.a)(o,e);var t=Object(f.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).getLocalStream=function(){var e=n.state.isAdmin,t={audio:!0,video:e?{width:{max:1280},height:{max:720},frameRate:{max:30}}:{width:{max:426},height:{max:240},frameRate:{max:30}}};return navigator.mediaDevices.getUserMedia(t).then((function(t){n.setState({localStream:t});for(var o=t.getAudioTracks(),a=0;a<o.length;++a)o[a].enabled=n.state.mute;e&&(o[0].enabled=!0)})).catch((function(e){console.log(\"getUserMedia Error: \",e)}))},n.componentDidMount=function(){var e=n.state.isAdmin;n.getLocalStream().then((function(){var t=v.a.connect(\"https://20bb5aa6.ngrok.io\",{query:{admin:e}}),o=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.emit(e,{socketId:t.id,payload:o})},a=function(e,t){try{var a=new RTCPeerConnection(b);y=Object(d.a)(Object(d.a)({},y),{},Object(s.a)({},e,a)),a.onicecandidate=function(e){var t=e.candidate;console.log(\"onicecandidate\",{candidate:t}),t&&o(\"candidate\",{candidate:t})},a.onnegotiationneeded=function(){console.log(\"onnegotiationneeded\")},a.oniceconnectionstatechange=function(e){console.log(\"oniceconnectionstatechange\",{event:e}),console.log(a)},a.ontrack=function(t){console.log(\"ontrack\",{event:t});var o=t.track;o&&n.setState((function(t){var n=t.selectedVideo,a=t.remoteStreams,i=Object(c.a)(a),r=i.findIndex((function(t){return t.id===e}));return-1===r&&(r=i.push({id:e,name:e,stream:new MediaStream})-1),i[r].stream.addTrack(o),{selectedVideo:n||i[r],remoteStreams:i}}))},a.close=function(){},t(a)}catch(i){console.log(\"Something went wrong! pc not created!!\",i),t(null)}};t.on(\"candidate\",(function(e){var t=e.socketId,o=e.candidate,n=y[t];n&&n.addIceCandidate(new RTCIceCandidate(o))})),t.on(\"connectionSuccess\",(function(t){var o=t.peerCount,a=e?o>0?\"Total Connected Peers: \".concat(o):\"Waiting for other peers to connect\":\"Connected\";n.setState({status:a})})),e?(t.on(\"peerJoin\",(function(e){var t=e.socketId,i=e.peerCount;console.log(\"peerJoin\",{socketId:t,peerCount:i}),n.setState({status:i>0?\"Total Connected Peers: \".concat(i):\"Waiting for other peers to connect\"}),a(t,(function(e){n.state.localStream&&n.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),function(e){e.createOffer(k).then((function(t){return e.setLocalDescription(t)})).then((function(){o(\"offer\",{desc:e.localDescription})}))}(e)}))})),t.on(\"answer\",(function(e){var t=e.socketId,o=e.desc;console.log(\"answer\",{socketId:t,desc:o});var n=y[t];n&&n.setRemoteDescription(new RTCSessionDescription(o))})),t.on(\"peerDisconnect\",(function(e){var t=e.socketId;console.log(\"peerDisconnect\",{socketId:t}),n.setState((function(e){var o=e.remoteStreams,n=e.selectedVideo;return{remoteStreams:o.filter((function(e){return e.id!==t})),selectedVideo:n&&n.id===t?o[0]:n}}))}))):t.on(\"offer\",(function(e){var t=e.socketId,i=e.desc;console.log(\"offer\",{socketId:t,desc:i}),a(t,(function(e){n.state.localStream&&n.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),e.setRemoteDescription(new RTCSessionDescription(i)).then((function(){return e.createAnswer(k)})).then((function(t){return e.setLocalDescription(t)})).then((function(){o(\"answer\",{desc:e.localDescription})}))}))}))}))},n.switchVideo=function(e){n.setState({selectedVideo:e})},n.state={localStream:null,mute:!1,remoteStreams:[],selectedVideo:null,status:\"Please wait...\",isAdmin:\"/admin\"===window.location.pathname},n}return Object(u.a)(o,[{key:\"render\",value:function(){var e=this,t=a.a.createElement(\"div\",{style:{color:\"yellow\",padding:5}},this.state.status);return a.a.createElement(\"div\",{style:{backgroundColor:\"black\",minHeight:\"100%\"}},this.state.isAdmin?a.a.createElement(a.a.Fragment,null,a.a.createElement(\"div\",null,a.a.createElement(S,{switchVideo:this.switchVideo,remoteStreams:this.state.remoteStreams})),a.a.createElement(\"div\",{style:{zIndex:4,position:\"absolute\",margin:10,backgroundColor:\"#cdc4ff4f\",padding:10,borderRadius:5}},t)):a.a.createElement(a.a.Fragment,null,a.a.createElement(p,{videoStyles:{zIndex:2,position:\"absolute\",right:0,width:200,height:200,margin:5,backgroundColor:\"black\"},videoStream:this.state.localStream,autoPlay:!0,muted:!0}),this.state.selectedVideo?a.a.createElement(p,{videoStyles:{zIndex:1,position:\"fixed\",bottom:0,minWidth:\"100%\",minHeight:\"100%\",backgroundColor:\"black\"},videoStream:this.state.selectedVideo.stream,autoPlay:!0}):null,a.a.createElement(\"div\",{style:{zIndex:4,position:\"absolute\",margin:10,backgroundColor:\"#cdc4ff4f\",padding:10,borderRadius:5}},t),a.a.createElement(\"div\",{style:{zIndex:5,position:\"absolute\",margin:10,right:10,bottom:120}},a.a.createElement(\"button\",{onMouseDown:function(){for(var t=0;t<e.state.localStream.getAudioTracks().length;++t)e.state.localStream.getAudioTracks()[t].enabled=!0},onMouseUp:function(){for(var t=0;t<e.state.localStream.getAudioTracks().length;++t)e.state.localStream.getAudioTracks()[t].enabled=!1}},\"Push to talk\"))))}}]),o}(n.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);","extractedComments":[]}