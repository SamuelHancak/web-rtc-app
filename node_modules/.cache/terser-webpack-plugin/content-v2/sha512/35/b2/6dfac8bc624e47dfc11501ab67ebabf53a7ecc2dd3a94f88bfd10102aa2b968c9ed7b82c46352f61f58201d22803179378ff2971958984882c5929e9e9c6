{"map":{"version":3,"sources":["static/js/main.9cf015bf.chunk.js"],"names":["this","push","39","module","exports","__webpack_require__","44","73","76","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","toConsumableArray","defineProperty","objectSpread2","classCallCheck","createClass","inherits","createSuper","lib","lib_default","video","_Component","Object","Video","_super","props","_this","call","state","key","value","videoStream","srcObject","nextProps","_this2","a","createElement","style","frameStyle","id","muted","autoPlay","videoStyles","ref","_ref","videos","Videos","rVideos","remoteStreams","_rVideos","map","rVideo","index","name","display","stream","height","width","float","padding","cursor","objectFit","borderRadius","setState","zIndex","position","backgroundColor","top","whiteSpace","RTCPeerConnectionConfig","iceServers","urls","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","peerConnections","src_App","App","getLocalStream","constraints","audio","isAdmin","max","frameRate","navigator","mediaDevices","getUserMedia","then","localStream","catch","e","console","log","componentDidMount","socket","connect","query","admin","sendToPeer","messageType","payload","arguments","length","undefined","emit","socketId","createPeerConnection","remoteSocketId","callback","pc","RTCPeerConnection","onicecandidate","candidate","onnegotiationneeded","oniceconnectionstatechange","event","ontrack","track","_ref2","selectedVideo","remoteStreamsCopy","streamObjIndex","findIndex","MediaStream","addTrack","close","on","_ref3","addIceCandidate","RTCIceCandidate","_ref4","peerCount","status","concat","_ref5","getTracks","forEach","createOffer","offer","setLocalDescription","desc","localDescription","_ref6","setRemoteDescription","RTCSessionDescription","_ref7","_ref8","filter","_ref9","createAnswer","answer","switchVideo","_video","window","location","pathname","statusText","color","minHeight","Fragment","right","bottom","margin","minWidth","Boolean","hostname","match","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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"},"code":"(this[\"webpackJsonpweb-rtc-audio\"]=this[\"webpackJsonpweb-rtc-audio\"]||[]).push([[0],{39:function(e,t,n){e.exports=n(76)},44:function(e,t,n){},73:function(e,t){},76:function(e,t,n){\"use strict\";n.r(t);var o=n(0),a=n.n(o),i=n(36),r=n.n(i),c=(n(44),n(38)),s=n(11),d=n(6),l=n(2),u=n(3),m=n(5),f=n(4),h=n(37),v=n.n(h),p=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).state={},o}return Object(u.a)(n,[{key:\"componentDidMount\",value:function(){this.props.videoStream&&(this.video.srcObject=this.props.videoStream)}},{key:\"componentWillReceiveProps\",value:function(e){e.videoStream&&e.videoStream!==this.props.videoStream&&(this.video.srcObject=e.videoStream)}},{key:\"render\",value:function(){var e=this;return a.a.createElement(\"div\",{style:Object(d.a)({},this.props.frameStyle)},a.a.createElement(\"video\",{id:this.props.id,muted:this.props.muted,autoPlay:!0,style:Object(d.a)({},this.props.videoStyles),ref:function(t){e.video=t}}))}}]),n}(o.Component),g=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).state={rVideos:[],remoteStreams:[]},o}return Object(u.a)(n,[{key:\"componentWillReceiveProps\",value:function(e){if(this.props.remoteStreams!==e.remoteStreams){var t=e.remoteStreams.map((function(e,t){return a.a.createElement(\"div\",{id:e.name,style:{display:\"inline\"},key:t},a.a.createElement(p,{videoStream:e.stream,frameStyle:{height:120,width:213,float:\"left\",padding:\"0 3px\"},videoStyles:{cursor:\"disabled\",objectFit:\"cover\",borderRadius:3,height:120,width:213}}))}));this.setState({remoteStreams:e.remoteStreams,rVideos:t})}}},{key:\"render\",value:function(){return a.a.createElement(\"div\",{style:{zIndex:3,position:\"fixed\",padding:\"6px 3px\",backgroundColor:\"rgba(0,0,0,0.3)\",height:120,top:\"auto\",whiteSpace:\"nowrap\"}},this.state.rVideos)}}]),n}(o.Component),S={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},b={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},k={},y=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).getLocalStream=function(){var e={audio:!0,video:o.state.isAdmin?{width:{max:1280},height:{max:720},frameRate:{max:30}}:{width:{max:426},height:{max:240},frameRate:{max:30}}};return navigator.mediaDevices.getUserMedia(e).then((function(e){o.setState({localStream:e})})).catch((function(e){console.log(\"getUserMedia Error: \",e)}))},o.componentDidMount=function(){var e=o.state.isAdmin;o.getLocalStream().then((function(){var t=v.a.connect(\"https://coronastage-stream.herokuapp.com\",{query:{admin:e}}),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.emit(e,{socketId:t.id,payload:n})},a=function(e,t){try{var a=new RTCPeerConnection(S);k=Object(d.a)(Object(d.a)({},k),{},Object(s.a)({},e,a)),a.onicecandidate=function(e){var t=e.candidate;console.log(\"onicecandidate\",{candidate:t}),t&&n(\"candidate\",{candidate:t})},a.onnegotiationneeded=function(){console.log(\"onnegotiationneeded\")},a.oniceconnectionstatechange=function(e){console.log(\"oniceconnectionstatechange\",{event:e}),console.log(a)},a.ontrack=function(t){console.log(\"ontrack\",{event:t});var n=t.track;n&&o.setState((function(t){var o=t.selectedVideo,a=t.remoteStreams,i=Object(c.a)(a),r=i.findIndex((function(t){return t.id===e}));return-1===r&&(r=i.push({id:e,name:e,stream:new MediaStream})-1),i[r].stream.addTrack(n),{selectedVideo:o||i[r],remoteStreams:i}}))},a.close=function(){},t(a)}catch(i){console.log(\"Something went wrong! pc not created!!\",i),t(null)}};t.on(\"candidate\",(function(e){var t=e.socketId,n=e.candidate,o=k[t];o&&o.addIceCandidate(new RTCIceCandidate(n))})),t.on(\"connectionSuccess\",(function(t){var n=t.peerCount,a=e?n>0?\"Total Connected Peers: \".concat(n):\"Waiting for other peers to connect\":\"Connected\";o.setState({status:a})})),e?(t.on(\"peerJoin\",(function(e){var t=e.socketId,i=e.peerCount;console.log(\"peerJoin\",{socketId:t,peerCount:i}),o.setState({status:i>0?\"Total Connected Peers: \".concat(i):\"Waiting for other peers to connect\"}),a(t,(function(e){o.state.localStream&&o.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),function(e){e.createOffer(b).then((function(t){return e.setLocalDescription(t)})).then((function(){n(\"offer\",{desc:e.localDescription})}))}(e)}))})),t.on(\"answer\",(function(e){var t=e.socketId,n=e.desc;console.log(\"answer\",{socketId:t,desc:n});var o=k[t];o&&o.setRemoteDescription(new RTCSessionDescription(n))})),t.on(\"peerDisconnect\",(function(e){var t=e.socketId;console.log(\"peerDisconnect\",{socketId:t}),o.setState((function(e){var n=e.remoteStreams,o=e.selectedVideo;return{remoteStreams:n.filter((function(e){return e.id!==t})),selectedVideo:o&&o.id===t?n[0]:o}}))}))):t.on(\"offer\",(function(e){var t=e.socketId,i=e.desc;console.log(\"offer\",{socketId:t,desc:i}),a(t,(function(e){o.state.localStream&&o.state.localStream.getTracks().forEach((function(t){return e.addTrack(t)})),e.setRemoteDescription(new RTCSessionDescription(i)).then((function(){return e.createAnswer(b)})).then((function(t){return e.setLocalDescription(t)})).then((function(){n(\"answer\",{desc:e.localDescription})}))}))}))}))},o.switchVideo=function(e){o.setState({selectedVideo:e})},o.state={localStream:null,remoteStreams:[],selectedVideo:null,status:\"Please wait...\",isAdmin:\"/admin\"===window.location.pathname},o}return Object(u.a)(n,[{key:\"render\",value:function(){var e=a.a.createElement(\"div\",{style:{color:\"yellow\",padding:5}},this.state.status);return a.a.createElement(\"div\",{style:{backgroundColor:\"black\",minHeight:\"100%\"}},this.state.isAdmin?a.a.createElement(a.a.Fragment,null,a.a.createElement(\"div\",null,a.a.createElement(g,{remoteStreams:this.state.remoteStreams})),a.a.createElement(p,{videoStyles:{zIndex:2,position:\"absolute\",right:10,bottom:10,width:200,height:200,margin:5,backgroundColor:\"black\"},videoStream:this.state.localStream,autoPlay:!0,muted:!0}),a.a.createElement(\"div\",{style:{zIndex:4,position:\"absolute\",margin:10,backgroundColor:\"#cdc4ff4f\",padding:10,borderRadius:5,right:10,bottom:200}},e)):a.a.createElement(a.a.Fragment,null,a.a.createElement(p,{videoStyles:{zIndex:2,position:\"absolute\",right:0,width:200,height:200,margin:5,backgroundColor:\"black\"},videoStream:this.state.localStream,autoPlay:!0,muted:!0}),this.state.selectedVideo?a.a.createElement(p,{videoStyles:{zIndex:1,position:\"fixed\",bottom:0,minWidth:\"100%\",minHeight:\"100%\",backgroundColor:\"black\"},videoStream:this.state.selectedVideo.stream,autoPlay:!0}):null,a.a.createElement(\"div\",{style:{zIndex:4,position:\"absolute\",margin:10,backgroundColor:\"#cdc4ff4f\",padding:10,borderRadius:5}},e),a.a.createElement(\"div\",{style:{zIndex:5,position:\"absolute\",margin:10,right:10,bottom:120}})))}}]),n}(o.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);","extractedComments":[]}